datasource db {
    url      = env("DB_URL")
    provider = "postgresql"
}

generator client {
    provider = "prisma-client-js"
}

model Game {
    id              String   @id @default(cuid())
    name            String
    description     String
    platform        Platform @relation(fields: [platformName], references: [name])
    platformName    String
    dateReleased    DateTime
    //dateAdded DateTime
    //canBorrow Boolean
    //playerMin    Int
    //playerMax    Int
    playtimeMinutes Int // Stored in minutes @map("playtime")

    @@map("games")
}

model Platform {
    name String @id
    game Game[]

    @@map("platforms")
}

model User {
    id              String   @id @default(cuid())
    name            String
    accessToken     String?  @unique
    externalUser    ExternalUser[]

    @@map("users")
}

model ExternalUser {
    service         String
    serviceUserId   String
    user            User   @relation(fields: [userId], references: [id])
    userId          String

    @@id([service, serviceUserId])
    @@map("external_users")
}
